<a id = "top"></a>

# 配置开发环境

----

## 目录

* [go](#1)
* [java](#2)
* [docker](#3)
* [docker-compose](#4)
* [git](#5)

<a id = "1"></a>

## go

```shell
cd /usr/local
mkdir dev
cd dev
wget https://golang.google.cn/dl/go1.16.15.linux-amd64.tar.gz
tar xzvf go1.16.15.linux-amd64.tar.gz -C ./
vi /etc/profile
# 添加内容
export GOROOT=/usr/local/dev/go
export GOPATH=/home/user/go
export GONOSUMDB=github.com/hyperledger/fabric*
export GO111MODULE=on
export GOPROXY=https://goproxy.cn,direct

export GOROOT=${WD}/go1.22.10
export GOPATH=$HOME/codes/go
export GONOSUMDB=github.com/hyperledger/fabric*,172.25.133.3/*,chainmaker.org/*
export GOSUMDB=sum.golang.google.cn
export GOINSECURE=172.25.133.3,chainmaker.org/chainmaker/*
#export GOPRIVATE=*.chainmaker.org
export GO111MODULE=on
export GOPRIVATE=172.25.133.3,chainmaker.org/chainmaker/*
export GOTMPDIR=$GOPATH/tmp
export GOCACHE=$GOPATH/cache
export GOTOOLCHAIN=go1.22.10+auto
export GOENV=$GOPATH/env
#export GOPROXY=direct
export GOPROXY=https://goproxy.cn,direct

export PATH=$PATH:$GOROOT/bin:$GOPATH/bin
# 保存文件 按esc :wq
source /etc/profile

```

<a id = "2"></a>

## java

[华为jdk镜像](https://repo.huaweicloud.com/java/jdk/)

```shell
cd /usr/local/dev
wget https://repo.huaweicloud.com/java/jdk/8u201-b09/jdk-8u201-linux-x64.tar.gz
tar xzvf jdk-8u201-linux-x64.tar.gz -C ./jdk-8u201-linux-x64.tar.gz
ls 
# 查看java文件名 
mv javaxxx jdk8
vi /etc/profile

#java环境变量
export JAVA_HOME=/usr/local/dev/jdk8
export JRE_HOME=$JAVA_HOME/jre
export CLASSPATH=.:$JRE_HOME/lib:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/other.jar
export JAVA_TOOL_OPTIONS=-Dfile.encoding=UTF-8

export PATH=$PATH:$JAVA_HOME/bin
# 保存文件 按esc :wq
source /etc/profile
```

<a id = "3"></a>

## docker

* 安装最新版

```shell
curl -sSL https://get.daocloud.io/docker | sh
```

* 安装指定版本

```shell
sudo apt-get remove docker docker-engine docker.io containerd runc
sudo apt-get update
sudo apt-get install \
    apt-transport-https \
    ca-certificates \
    curl \
    gnupg-agent \
    software-properties-common
curl -fsSL https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu/gpg | sudo apt-key add -
sudo add-apt-repository \
   "deb [arch=amd64] https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu/ \
  $(lsb_release -cs) \
  stable"
sudo apt-get update
sudo apt-get install docker-ce docker-ce-cli containerd.io

apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin

apt-cache madison docker-ce
```

* 结果如下

```text
  docker-ce | 5:18.09.1~3-0~ubuntu-xenial | https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu  xenial/stable amd64 Packages
  docker-ce | 5:18.09.0~3-0~ubuntu-xenial | https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu  xenial/stable amd64 Packages
  docker-ce | 18.06.1~ce~3-0~ubuntu       | https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu  xenial/stable amd64 Packages
  docker-ce | 18.06.0~ce~3-0~ubuntu       | https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu  xenial/stable amd64 Packages
  ...
```

* 继续执行

```shell
# <VERSION_STRING> 上方第二列 如 18.06.0~ce~3-0~ubuntu
sudo apt-get install docker-ce=<VERSION_STRING> docker-ce-cli=<VERSION_STRING> containerd.io

sudo docker run hello-world
```

<a id = "4"></a>

## docker-compose

* docker-compose版本查看
  [docker-compose查看版本](https://github.com/docker/compose/releases)

```shell
# v2.21.0位置替换指定版本
sudo curl -L "https://github.com/docker/compose/releases/download/v2.21.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
```

安装最新版

```shell
sudo curl -L "https://mirror.ghproxy.com/https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
# 创建软连接
ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose
# 加权限
chmod +x /usr/local/bin/docker-compose
```

<a id = "5"></a>

## git

```shell
# 方式一
apt install git

# 方式二
add-apt-repository ppa:git-core/ppa
apt update
apt install git

export GIT_TERMINAL_PROMPT=1
```


## maven

```shell
# maven
export M2_HOME=${WD}/maven363
```

## editor

```shell
# editor
export EDITOR=/usr/bin/vim
```


## rust

```shell
# rust
export CARGO_HOME=${WD}/rust/cargo
export RUSTUP_HOME=${WD}/rust/rustup
export RUSTUP_UPDATE_ROOT=https://mirrors.aliyun.com/rustup/rustup
export RUSTUP_DIST_SERVER=https://mirrors.aliyun.com/rustup
```


## protoc
```shell
# protoc
export PROTOC_HOME=$WD/protoc
```

## acme.sh

```shell
# acme.sh
# alias acme.sh="$HOME/.acme.sh/acme.sh"
```


## gvm
```shell
# gvm 不好使
#[[ -s "/root/.gvm/scripts/gvm" ]] && source "/root/.gvm/scripts/gvm"
```

## tldr
```shell
# TLDR
export TLDR_LANGUAGE=zh
```

## path
```shell
# path
export PATH=$GOROOT/bin:$GOPATH/bin:$JAVA_HOME/bin:$JRE_HOME/bin:$M2_HOME/bin:$PROTOC_HOME/bin:$CARGO_HOME/bin:$PATH
export PATH=$(printf "%s" "$PATH" | awk -v RS=':' '!a[$1]++ { if (NR > 1) printf RS; printf $1 }')
```

## 打文件分小文件

```shell
awk '{
  if (byte_count > 500 * 1024 * 1024) {
    close(outfile);
    file_num++;
    byte_count = 0;
  }
  outfile = "small_log_" sprintf("%02d", file_num) ".log";
  print > outfile;
  byte_count += length($0) + 1; # +1 for the newline character
}
{ file_num = 1; byte_count = 0; }' large_log_file.log


```
